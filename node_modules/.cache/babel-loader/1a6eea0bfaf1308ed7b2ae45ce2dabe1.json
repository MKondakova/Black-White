{"ast":null,"code":"var _jsxFileName = \"/Users/garinegorgmail.com/Downloads/gohackathon-base-client-instance-master/src/pages/Main/components/LoadingGame/LoadingGame.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { ButtonCustom } from \"../../../../components/ButtonCustom\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { client, token } from '../../../../Socket.js';\nimport { clearGameId } from \"../../../../store/GameCreate/actions\";\nimport { Input } from \"../../../../components/InputCustom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Text = styled.p`\n  font-size: 36px;\n  line-height: 42px;\n  margin-bottom: 86px;\n  text-align: center;\n`;\n_c = Text;\nconst Spinner = styled.div`\n  margin: 0 auto;\n  width: 126px;\n  margin-bottom: 46px;\n`;\n_c2 = Spinner;\nexport const LoadingGame = ({\n  text,\n  setSearchType,\n  setOpponent,\n  searchType,\n  gameId\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const user_id = useSelector(state => state.profile.userProfile.user.id);\n  const codeGame = useSelector(state => state.createGame.code);\n  useEffect(() => {\n    if (gameId) {\n      client.send(JSON.stringify([5, 'go/game']));\n      client.send(JSON.stringify([7, \"go/game\", {\n        command: \"auth\",\n        token: localStorage.getItem('GoGameToken'),\n        game_id: gameId\n      }]));\n\n      client.onmessage = function (e) {\n        if (typeof e.data === 'string') {\n          let jsonData = JSON.parse(e.data);\n\n          if (jsonData.payload) {\n            if (jsonData.payload.type === 'userConnected') {\n              if (String(jsonData.payload.userId) !== String(user_id)) {\n                setOpponent(jsonData.payload.player);\n\n                if (searchType === \"Random\") {\n                  setSearchType(\"ConnectRandom\");\n                }\n\n                if (searchType === \"CodeEnter\") {\n                  setSearchType(\"ConnectCode\");\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n  }, [gameId]);\n\n  const cancelGame = async () => {\n    client.send(JSON.stringify([7, \"go/game\", {\n      command: \"resign\",\n      token: token,\n      game_id: gameId\n    }]));\n    await dispatch(clearGameId());\n    setSearchType(\"\");\n  };\n\n  const codeBlock = () => {\n    if (codeGame) {\n      return /*#__PURE__*/_jsxDEV(Input, {\n        value: codeGame || 'Ожидайте',\n        textAlign: \"center\",\n        disabled: true,\n        mt: 40,\n        mb: 30\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Spinner, {\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Grid\",\n        color: \"#3b3b3b\",\n        height: 126,\n        width: 126\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Text, {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), codeBlock(), /*#__PURE__*/_jsxDEV(ButtonCustom, {\n      onClick: () => cancelGame(),\n      children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoadingGame, \"UdIpYz3XPXRtWPVhhKWmSQtxzO4=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c3 = LoadingGame;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Text\");\n$RefreshReg$(_c2, \"Spinner\");\n$RefreshReg$(_c3, \"LoadingGame\");","map":{"version":3,"sources":["/Users/garinegorgmail.com/Downloads/gohackathon-base-client-instance-master/src/pages/Main/components/LoadingGame/LoadingGame.js"],"names":["React","useEffect","styled","ButtonCustom","Loader","useDispatch","useSelector","client","token","clearGameId","Input","Text","p","Spinner","div","LoadingGame","text","setSearchType","setOpponent","searchType","gameId","dispatch","user_id","state","profile","userProfile","user","id","codeGame","createGame","code","send","JSON","stringify","command","localStorage","getItem","game_id","onmessage","e","data","jsonData","parse","payload","type","String","userId","player","cancelGame","codeBlock"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { ButtonCustom } from \"../../../../components/ButtonCustom\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { client, token } from '../../../../Socket.js'\nimport { clearGameId } from \"../../../../store/GameCreate/actions\";\nimport { Input } from \"../../../../components/InputCustom\";\n\nconst Text = styled.p`\n  font-size: 36px;\n  line-height: 42px;\n  margin-bottom: 86px;\n  text-align: center;\n`;\n\nconst Spinner = styled.div`\n  margin: 0 auto;\n  width: 126px;\n  margin-bottom: 46px;\n`;\n\nexport const LoadingGame = ({ text, setSearchType, setOpponent, searchType, gameId }) => {\n  const dispatch = useDispatch();\n  const user_id = useSelector((state) => state.profile.userProfile.user.id);\n  const codeGame = useSelector(state => state.createGame.code);\n\n  useEffect(() => {\n    if (gameId) {\n      client.send(JSON.stringify([5, 'go/game']));\n      client.send(JSON.stringify([7, \"go/game\", {command: \"auth\", token: localStorage.getItem('GoGameToken'), game_id: gameId}]));\n\n      client.onmessage = function(e) {\n        if (typeof e.data === 'string') {\n          let jsonData = JSON.parse(e.data);\n          if (jsonData.payload) {\n            if (jsonData.payload.type === 'userConnected') {\n              if (String(jsonData.payload.userId) !== String(user_id)) {\n                setOpponent(jsonData.payload.player)\n                if (searchType === \"Random\") {\n                  setSearchType(\"ConnectRandom\");\n                }\n                if (searchType === \"CodeEnter\") {\n                  setSearchType(\"ConnectCode\");\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }, [gameId]);\n\n  const cancelGame = async () => {\n    client.send(JSON.stringify([7, \"go/game\", {command: \"resign\", token: token, game_id: gameId}]));\n    await dispatch(clearGameId())\n    setSearchType(\"\")\n  }\n  const codeBlock = () => {\n    if (codeGame) {\n      return <Input value={codeGame || 'Ожидайте'} textAlign=\"center\" disabled mt={40} mb={30} />\n    }\n  }\n\n  return (\n    <>\n      <Spinner>\n        <Loader type=\"Grid\" color=\"#3b3b3b\" height={126} width={126} />\n      </Spinner>\n      <Text>{text}</Text>\n      {codeBlock()}\n      <ButtonCustom onClick={() => cancelGame()}>\n        Отмена\n      </ButtonCustom>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}