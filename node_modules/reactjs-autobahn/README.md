# reactjs-autobahn ![contributions welcome](https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat)

`reactjs-autobahn` is a subproject of the Autobahn project and provides an open-source implementation of the Web Application Messaging Protocol V2 in JavaScript under the MIT license.


### Installing

```
npm install --save reactjs-autobahn
```

### Usage

```js
  import React, { Component } from 'react';
  import WS from 'reactjs-autobahn'; 

  export default class WSExample extends Component { 
    constructor(props) {
        super(props); 
        this.state = { 
            socketState: "",
            socketErorState: ""
        };
    } 
    componentDidMount() { 
       const websocket = WS.connect("ws://127.0.0.1:1337");

        websocket.on("socket/connect", function (session) { 

            session.subscribe("channel", function (uri, payload) {
                 this.setState({socketState: payload.msg}); 
            });

            session.call("rpc/validation").then(
                function (result) {
                    this.setState({socketState: result});  
                },
                function (error, desc) {
                    this.setState({socketErorState: error.reason});   
                }
            ); 

            session.publish("channel", {
                msg: "I'm leaving..."
            });

            session.unsubscribe("channel"); 
        }); 

        websocket.on("socket/disconnect", function (error) { 
            this.setState({socketErrorState: error.reason});   
        });
    }

    render() {
        return (
            <div>
                <div>Socket Success State: {this.setState.socketState}</div>
                <div>Socket Error State: {this.setState.socketErorState}</div>
            </div>
        );
    }
}

``` 
